<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>–ê–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ ‚Äî –ú–µ–≥–∞—Ñ–æ–Ω –†–∏—Ç–µ–π–ª</title>
		<style>
			body {
				font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
				background: #f5f7fa;
				color: #333;
				margin: 0;
				padding: 20px;
			}
			.container {
				max-width: 600px;
				margin: 0 auto;
				background: white;
				padding: 30px;
				border-radius: 12px;
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
			}
			h1 {
				text-align: center;
				color: #00a651;
				margin-bottom: 10px;
			}
			p.subtitle {
				text-align: center;
				color: #666;
				font-size: 14px;
				margin-bottom: 30px;
			}
			.form-group {
				margin-bottom: 18px;
			}
			label {
				display: block;
				margin-bottom: 6px;
				font-weight: 600;
				color: #444;
			}
			.info {
				font-size: 12px;
				color: #888;
				margin-top: 4px;
			}
			input[type='number'],
			input[type='text'],
			textarea,
			select {
				width: 100%;
				padding: 10px;
				border: 1px solid #ddd;
				border-radius: 6px;
				font-size: 16px;
				box-sizing: border-box;
			}
			button {
				background: #00a651;
				color: white;
				border: none;
				padding: 12px 24px;
				font-size: 16px;
				border-radius: 6px;
				cursor: pointer;
				width: 100%;
				margin-top: 10px;
				font-weight: bold;
			}
			button:hover {
				background: #008c45;
			}
			button.secondary {
				background: #6c757d;
				margin-top: 15px;
			}
			button.secondary:hover {
				background: #5a6268;
			}
			.page {
				display: none;
			}
			.page.active {
				display: block;
			}
			#result,
			#questionsPage {
				margin-top: 30px;
				padding: 20px;
				border: 1px solid #e0e0e0;
				border-radius: 8px;
				background: #f9fff9;
			}
			.score {
				font-size: 28px;
				font-weight: bold;
				color: #00a651;
				text-align: center;
				margin: 10px 0;
			}
			.recommendations {
				margin-top: 15px;
			}
			.rec-item {
				background: #e8f5e8;
				padding: 10px;
				border-radius: 6px;
				margin: 8px 0;
				border-left: 4px solid #00a651;
			}
			.kpi-breakdown {
				font-size: 14px;
				color: #555;
				margin-top: 15px;
				background: #f0f0f0;
				padding: 10px;
				border-radius: 6px;
			}
			.question {
				margin-bottom: 20px;
				padding: 15px;
				background: #fff8e1;
				border-left: 4px solid #ffb300;
				border-radius: 6px;
			}
			.question h3 {
				margin-top: 0;
				color: #d35400;
			}
			.final-thanks {
				text-align: center;
				font-size: 18px;
				color: #00a651;
				margin: 20px 0;
			}
			.error {
				color: #e74c3c;
				font-size: 12px;
				margin-top: 5px;
			}
		</style>
	</head>
	<body>
		<div class="container">
			<!-- –°–¢–†–ê–ù–ò–¶–ê 1: –í–í–û–î KPI -->
			<div id="inputPage" class="page active">
				<h1>–ê–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</h1>
				<p class="subtitle">–í–≤–µ–¥–∏—Ç–µ % –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–ª–∞–Ω–∞ –ø–æ –∫–∞–∂–¥–æ–º—É –ø–æ–∫–∞–∑–∞—Ç–µ–ª—é</p>

				<form id="kpiForm">
					<div class="form-group">
						<label for="name">–ò–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</label>
						<input type="text" id="name" placeholder="–ò–≤–∞–Ω–æ–≤ –ò.–ò." required />
					</div>

					<div class="form-group">
						<label for="revenue">–¢–æ–≤–∞—Ä–Ω–∞—è –≤—ã—Ä—É—á–∫–∞ (% –æ—Ç –ø–ª–∞–Ω–∞) ‚Äî –≤–µ—Å 40%</label>
						<input type="number" id="revenue" min="0" step="0.1" required />
						<div class="info">‚â§70% ‚Üí 0%, 70‚Äì150% ‚Üí –∑–Ω–∞—á–µ–Ω–∏–µ, >150% ‚Üí 150%</div>
					</div>

					<div class="form-group">
						<label for="accessories">–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã (% –æ—Ç –ø–ª–∞–Ω–∞) ‚Äî –≤–µ—Å 30%</label>
						<input type="number" id="accessories" min="0" step="0.1" required />
						<div class="info">‚â§70% ‚Üí 0%, 70‚Äì150% ‚Üí –∑–Ω–∞—á–µ–Ω–∏–µ, >150% ‚Üí 150%</div>
					</div>

					<div class="form-group">
						<label for="finance"
							>–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —É—Å–ª—É–≥–∏ (% –æ—Ç –ø–ª–∞–Ω–∞) ‚Äî –≤–µ—Å 30%</label
						>
						<input type="number" id="finance" min="0" step="0.1" required />
						<div class="info">‚â§70% ‚Üí 0%, 70‚Äì150% ‚Üí –∑–Ω–∞—á–µ–Ω–∏–µ, >150% ‚Üí 150%</div>
					</div>

					<button type="submit">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</button>
				</form>
			</div>

			<!-- –°–¢–†–ê–ù–ò–¶–ê 2: –†–ï–ó–£–õ–¨–¢–ê–¢ –ê–ù–ê–õ–ò–ó–ê -->
			<div id="resultPage" class="page">
				<h2>–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è <span id="resultName"></span></h2>
				<div class="score" id="finalScore"></div>

				<div class="kpi-breakdown" id="breakdown"></div>

				<div class="recommendations">
					<h3>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞–º:</h3>
					<div id="recList"></div>
				</div>

				<button id="backToInput" class="secondary">–ù–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑</button>
			</div>

			<!-- –°–¢–†–ê–ù–ò–¶–ê 3: –í–û–ü–†–û–°–´ –ü–û –ö–ê–¢–ï–ì–û–†–ò–ò -->
			<div id="questionsPage" class="page">
				<div id="questionContent"></div>
				<div id="errorMsg" class="error"></div>
				<button id="nextQuestion" style="display: none">–î–∞–ª–µ–µ ‚Üí</button>
				<button id="finishQuestions" style="display: none" class="secondary">
					–ó–∞–≤–µ—Ä—à–∏—Ç—å
				</button>
			</div>
		</div>

		<script>
			// === –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ===
			let currentData = {}
			let zeroCategories = []
			let currentQuestionIndex = 0
			let surveyResponses = {}
			let hasZeroCategories = false

			// === –†–æ—É—Ç–∏–Ω–≥ ===
			function showPage(pageId) {
				document
					.querySelectorAll('.page')
					.forEach(p => p.classList.remove('active'))
				document.getElementById(pageId).classList.add('active')
			}

			// === –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è ===
			function normalize(value) {
				if (value <= 70) return 0
				if (value > 150) return 150
				return value
			}

			// === KPI –§–æ—Ä–º–∞ ===
			document
				.getElementById('kpiForm')
				.addEventListener('submit', function (e) {
					e.preventDefault()

					const name = document.getElementById('name').value
					const revenue = parseFloat(document.getElementById('revenue').value)
					const accessories = parseFloat(
						document.getElementById('accessories').value
					)
					const finance = parseFloat(document.getElementById('finance').value)

					const normRevenue = normalize(revenue)
					const normAccessories = normalize(accessories)
					const normFinance = normalize(finance)

					const finalEfficiency =
						normRevenue * 0.4 + normAccessories * 0.3 + normFinance * 0.3

					currentData = {
						name,
						revenue,
						accessories,
						finance,
						normRevenue,
						normAccessories,
						normFinance,
						finalEfficiency,
					}
					zeroCategories = []
					if (normRevenue === 0) zeroCategories.push('revenue')
					if (normAccessories === 0) zeroCategories.push('accessories')
					if (normFinance === 0) zeroCategories.push('finance')

					hasZeroCategories = zeroCategories.length > 0

					if (!hasZeroCategories) {
						renderResultPage()
						showPage('resultPage')
					} else {
						startQuestions()
					}
				})

			// === –†–µ–Ω–¥–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ ===
			function renderResultPage() {
				const data = currentData
				const final = data.finalEfficiency

				document.getElementById('resultName').textContent = data.name
				document.getElementById('finalScore').textContent =
					final.toFixed(1) + '%'

				document.getElementById('breakdown').innerHTML = `
            <strong>–†–∞—Å—á—ë—Ç –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:</strong><br>
            ‚Ä¢ –¢–æ–≤–∞—Ä–Ω–∞—è –≤—ã—Ä—É—á–∫–∞: ${data.revenue}% ‚Üí ${
					data.normRevenue
				}% (√ó40%) ‚Üí –≤–∫–ª–∞–¥: ${(data.normRevenue * 0.4).toFixed(1)}%<br>
            ‚Ä¢ –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã: ${data.accessories}% ‚Üí ${
					data.normAccessories
				}% (√ó30%) ‚Üí –≤–∫–ª–∞–¥: ${(data.normAccessories * 0.3).toFixed(1)}%<br>
            ‚Ä¢ –§–∏–Ω. —É—Å–ª—É–≥–∏: ${data.finance}% ‚Üí ${
					data.normFinance
				}% (√ó30%) ‚Üí –≤–∫–ª–∞–¥: ${(data.normFinance * 0.3).toFixed(1)}%
        `

				const recList = document.getElementById('recList')
				recList.innerHTML = ''

				// === 1. ‚â•100% ‚Üí –ü–æ—Ö–≤–∞–ª–∞ ===
				if (final >= 100) {
					const praise = document.createElement('div')
					praise.className = 'rec-item'
					praise.innerHTML = `
                <strong>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º, ${data.name}!</strong><br>
                –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ <strong>${final.toFixed(
									1
								)}%</strong> —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ ‚Äî —ç—Ç–æ –æ—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!<br>
                –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ –∏ –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –∞–∫—Ü–∏–∏: <em>1+1=3</em>, <em>–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏</em>, <em>–∞–Ω—Ç–∏–≤–∏—Ä—É—Å</em>!
            `
					recList.appendChild(praise)
				}
				// === 2. <100%, –Ω–æ –≤—Å–µ >70% ‚Üí —Å–æ–≤–µ—Ç—ã ===
				else {
					const advice = []
					if (data.revenue < 100)
						advice.push(
							'–ü–µ—Ä–µ–æ—Ä–∏–µ–Ω—Ç–∏—Ä—É–π –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ <strong>–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏</strong>!'
						)
					if (data.accessories < 100)
						advice.push(
							'–ê–∫—Ü–∏—è <strong>1 + 1 = 3</strong> –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å—Å—è <strong>–∫–∞–∂–¥–æ–º—É –∫–ª–∏–µ–Ω—Ç—É</strong>!'
						)
					if (data.finance < 100)
						advice.push(
							'–ï—Å–ª–∏ –∑–∞–±—ã–≤–∞–µ—à—å –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —É—Å–ª—É–≥–∏ ‚Äî –≤–æ–∑—å–º–∏ –∑–∞ –ø—Ä–∞–≤–∏–ª–æ <strong>–∫–∞–∂–¥–æ–º—É –∫–ª–∏–µ–Ω—Ç—É –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –Ω–∞—à –∞–Ω—Ç–∏–≤–∏—Ä—É—Å</strong>!'
						)

					if (advice.length > 0) {
						const block = document.createElement('div')
						block.className = 'rec-item'
						block.innerHTML = `<strong>–°–æ–≤–µ—Ç—ã –ø–æ —É–ª—É—á—à–µ–Ω–∏—é:</strong><br>${advice
							.map(a => `‚Ä¢ ${a}`)
							.join('<br>')}`
						recList.appendChild(block)
					}
				}

				// === 3. –°–æ–≤–µ—Ç—ã –ø–æ –æ–ø—Ä–æ—Å–Ω–∏–∫–∞–º ===
				const surveyAdvice = []

				// ‚Äî‚Äî‚Äî –¢–û–í–ê–†–ù–ê–Ø –í–´–†–£–ß–ö–ê ‚Äî‚Äî‚Äî
				if (surveyResponses.revenue) {
					const r = surveyResponses.revenue
					const totalClients = parseInt(r.q1) || 0
					const refusedPrice = parseInt(r.q3) || 0
					const offeredAlt = parseInt(r.q4) || 0
					const notInterestedOffered = parseInt(r.q5) || 0
					const avgTime = r.q6

					if (refusedPrice > offeredAlt) {
						surveyAdvice.push(
							'–ß–∞—â–µ –ø–µ—Ä–µ–æ—Ä–∏–µ–Ω—Ç–∏—Ä—É–π –Ω–∞ <strong>–∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏</strong> ‚Äî –∫–∞–∂–¥—ã–π –æ—Ç–∫–∞–∑ –∏–∑-–∑–∞ —Ü–µ–Ω—ã ‚Äî —É–ø—É—â–µ–Ω–Ω–∞—è –ø—Ä–æ–¥–∞–∂–∞!'
						)
					}
					if (avgTime === 'less5' || avgTime === '5to10') {
						surveyAdvice.push(
							'–†–∞—Å—Å–∫–∞–∑—ã–≤–∞–π <strong>–ø–æ–¥—Ä–æ–±–Ω–µ–µ</strong>: —Ñ–∏—à–∫–∏, —Å—Ä–∞–≤–Ω–µ–Ω–∏—è, –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã. <strong>10+ –º–∏–Ω—É—Ç</strong> = –≤—ã—à–µ –∫–æ–Ω–≤–µ—Ä—Å–∏—è!'
						)
					}
					const percentToNotInterested =
						totalClients > 0 ? (notInterestedOffered / totalClients) * 100 : 0
					if (percentToNotInterested < 50) {
						surveyAdvice.push(
							'–¶–µ–ª—å: –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ <strong>—Ö–æ—Ç—è –±—ã 50% –Ω–µ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã—Ö</strong>!'
						)
					}
				}

				// ‚Äî‚Äî‚Äî –ê–ö–°–ï–°–°–£–ê–†–´ ‚Äî‚Äî‚Äî
				if (surveyResponses.accessories) {
					const a = surveyResponses.accessories
					const totalClients = parseInt(a.q5) || 0
					const offeredAction = (parseInt(a.q3) || 0) + (parseInt(a.q4) || 0)
					const percentOffered =
						totalClients > 0 ? (offeredAction / totalClients) * 100 : 0

					if (percentOffered < 70) {
						surveyAdvice.push(
							`–ê–∫—Ü–∏—è <strong>1+1=3</strong> –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∞ —Ç–æ–ª—å–∫–æ ${percentOffered.toFixed(
								0
							)}% –∫–ª–∏–µ–Ω—Ç–æ–≤. <strong>–¶–µ–ª—å: ‚â•70%</strong>!`
						)
					} else {
						surveyAdvice.push(
							`–û—Ç–ª–∏—á–Ω–æ! –ê–∫—Ü–∏—è 1+1=3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∞ ${percentOffered.toFixed(
								0
							)}% –∫–ª–∏–µ–Ω—Ç–æ–≤ ‚Äî –≤—ã—à–µ —Ü–µ–ª–∏!`
						)
					}
				}

				// ‚Äî‚Äî‚Äî –§–ò–ù.–£–°–õ–£–ì–ò ‚Äî‚Äî‚Äî
				if (surveyResponses.finance) {
					const f = surveyResponses.finance
					const totalClients = parseInt(f.q1) || 0
					const offeredServices = parseInt(f.q2) || 0
					const percentOffered =
						totalClients > 0 ? (offeredServices / totalClients) * 100 : 0
					const planNotMet = data.finance < 100

					if (percentOffered < 20) {
						surveyAdvice.push(
							`–§–∏–Ω.—É—Å–ª—É–≥–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω—ã —Ç–æ–ª—å–∫–æ ${percentOffered.toFixed(
								0
							)}% –∫–ª–∏–µ–Ω—Ç–æ–≤. <strong>–ü–æ–≥–æ–≤–æ—Ä–∏ —Å –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–º</strong> ‚Äî –∫–∞–∫ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å —á–∞—â–µ!`
						)
					} else if (percentOffered >= 80 && planNotMet) {
						surveyAdvice.push(
							`–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–æ ${percentOffered.toFixed(
								0
							)}% ‚Äî –æ—Ç–ª–∏—á–Ω–æ! –ù–æ –ø–ª–∞–Ω –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω. <strong>–ü–æ–≥–æ–≤–æ—Ä–∏ —Å –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–º</strong> –ø–æ –∫–∞—á–µ—Å—Ç–≤—É –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.`
						)
					} else if (percentOffered >= 80) {
						surveyAdvice.push(
							`–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–æ ${percentOffered.toFixed(0)}% ‚Äî —Å—É–ø–µ—Ä! –ü–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω!`
						)
					}
				}

				if (surveyAdvice.length > 0) {
					const block = document.createElement('div')
					block.className = 'rec-item'
					block.style.background = '#e8f5e8'
					block.style.borderLeft = '4px solid #4caf50'
					block.innerHTML = `
                <strong>–ü–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –æ–ø—Ä–æ—Å–∞:</strong><br>
                ${surveyAdvice.map(a => `‚Ä¢ ${a}`).join('<br>')}
            `
					recList.appendChild(block)
				}

				if (hasZeroCategories && Object.keys(surveyResponses).length > 0) {
					const thanks = document.createElement('div')
					thanks.className = 'rec-item'
					thanks.style.background = '#e3f2fd'
					thanks.style.borderLeft = '4px solid #2196f3'
					thanks.innerHTML = `<em>–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ç–≤–µ—Ç—ã! –î–∞–Ω–Ω—ã–µ –ø–æ–º–æ–≥—É—Ç —É–ª—É—á—à–∏—Ç—å —Ä–∞–±–æ—Ç—É.</em>`
					recList.appendChild(thanks)
				}
			}

			// === –û–ø—Ä–æ—Å ===
			function startQuestions() {
				currentQuestionIndex = 0
				surveyResponses = {}
				showNextQuestion()
			}

			function showNextQuestion() {
				if (currentQuestionIndex >= zeroCategories.length) {
					renderResultPage()
					showPage('resultPage')
					return
				}

				const category = zeroCategories[currentQuestionIndex]
				const title = {
					revenue: '–¢–æ–≤–∞—Ä–Ω–∞—è –≤—ã—Ä—É—á–∫–∞',
					accessories: '–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã',
					finance: '–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —É—Å–ª—É–≥–∏',
				}[category]

				document.getElementById('questionContent').innerHTML = `
            <div class="question">
                <h3>–í–æ–ø—Ä–æ—Å—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: <strong>${title}</strong></h3>
                <p><em>–û—Ç–≤–µ—Ç—å—Ç–µ —á–µ—Å—Ç–Ω–æ ‚Äî —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç —É–ª—É—á—à–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.</em></p>
                <form id="surveyForm"></form>
            </div>
        `

				const form = document.getElementById('surveyForm')
				form.innerHTML = ''

				if (category === 'revenue') {
					form.innerHTML = `
                <div class="form-group">
                    <label>1. –°–∫–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –±—ã–ª–æ –∑–∞ –¥–µ–Ω—å?</label>
                    <input type="number" id="q1" min="0" required>
                </div>
                <div class="form-group">
                    <label>2. –°–∫–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–ª–∏—Å—å —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞–º–∏/—Ä–æ—É—Ç–µ—Ä–∞–º–∏?</label>
                    <input type="number" id="q2" min="0" required>
                </div>
                <div class="form-group">
                    <label>3. –°–∫–æ–ª—å–∫–æ –∏–∑ –Ω–∏—Ö –æ—Ç–∫–∞–∑–∞–ª–∏—Å—å –æ—Ç –ø–æ–∫—É–ø–∫–∏ –∏–∑-–∑–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏?</label>
                    <input type="number" id="q3" min="0" required>
                </div>
                <div class="form-group">
                    <label>4. –°–∫–æ–ª—å–∫–∏–º –∏–∑ –æ—Ç–∫–∞–∑–∞–≤—à–∏—Ö—Å—è –±—ã–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω—ã –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏?</label>
                    <input type="number" id="q4" min="0" required>
                </div>
                <div class="form-group">
                    <label>5. –°–∫–æ–ª—å–∫–∏–º –∫–ª–∏–µ–Ω—Ç–∞–º, –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–≤—à–∏–º—Å—è —Ç–æ–≤–∞—Ä–∫–æ–π, –±—ã–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω—ã –∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏?</label>
                    <input type="number" id="q5" min="0" required>
                </div>
                <div class="form-group">
                    <label>6. –ö–∞–∫ –¥–æ–ª–≥–æ –≤ —Å—Ä–µ–¥–Ω–µ–º –¥–ª–∏–ª—Å—è –∫–æ–Ω—Ç–∞–∫—Ç —Å –∫–ª–∏–µ–Ω—Ç–æ–º?</label>
                    <select id="q6" required>
                        <option value="">‚Äî –í—ã–±–µ—Ä–∏—Ç–µ ‚Äî</option>
                        <option value="less5">–ú–µ–Ω–µ–µ 5 –º–∏–Ω—É—Ç</option>
                        <option value="5to10">5‚Äì10 –º–∏–Ω—É—Ç</option>
                        <option value="10to15">10‚Äì15 –º–∏–Ω—É—Ç</option>
                        <option value="more15">–ë–æ–ª–µ–µ 15 –º–∏–Ω—É—Ç</option>
                    </select>
                </div>
            `
				} else if (category === 'accessories') {
					form.innerHTML = `
                <div class="form-group">
                    <label>1. –°–∫–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–ª–∏—Å—å –∞–∫—Å–µ—Å—Å—É–∞—Ä–∞–º–∏?</label>
                    <input type="number" id="q1" min="0" required>
                </div>
                <div class="form-group">
                    <label>2. –°–∫–æ–ª—å–∫–æ –∏–∑ –Ω–∏—Ö –æ—Ç–∫–∞–∑–∞–ª–∏—Å—å –∏–∑-–∑–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏?</label>
                    <input type="number" id="q2" min="0" required>
                </div>
                <div class="form-group">
                    <label>3. –°–∫–æ–ª—å–∫–∏–º –∏–∑ –æ—Ç–∫–∞–∑–∞–≤—à–∏—Ö—Å—è –±—ã–ª–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∞ –∞–∫—Ü–∏—è 1 + 1 = 3?</label>
                    <input type="number" id="q3" min="0" required>
                </div>
                <div class="form-group">
                    <label>4. –°–∫–æ–ª—å–∫–∏–º –∫–ª–∏–µ–Ω—Ç–∞–º, –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–≤—à–∏–º—Å—è, –±—ã–ª–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∞ –∞–∫—Ü–∏—è 1 + 1 = 3?</label>
                    <input type="number" id="q4" min="0" required>
                </div>
                <div class="form-group">
                    <label>5. –°–∫–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –±—ã–ª–æ –∑–∞ –¥–µ–Ω—å?</label>
                    <input type="number" id="q5" min="0" required>
                </div>
            `
				} else if (category === 'finance') {
					form.innerHTML = `
                <div class="form-group">
                    <label>1. –°–∫–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –±—ã–ª–æ –∑–∞ –¥–µ–Ω—å?</label>
                    <input type="number" id="q1" min="0" required>
                </div>
                <div class="form-group">
                    <label>2. –°–∫–æ–ª—å–∫–∏–º –∏–∑ –Ω–∏—Ö –±—ã–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω—ã —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —É—Å–ª—É–≥–∏ (—á–∏—Å—Ç–∫–∞, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, –∞–Ω—Ç–∏–≤–∏—Ä—É—Å)?</label>
                    <input type="number" id="q2" min="0" required>
                </div>
            `
				}

				showPage('questionsPage')
				document.getElementById('nextQuestion').style.display = 'block'
				document.getElementById('finishQuestions').style.display = 'none'
				document.getElementById('errorMsg').textContent = ''
			}

			// === –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ ===
			document.getElementById('nextQuestion').addEventListener('click', () => {
				const form = document.getElementById('surveyForm')
				if (!form.checkValidity()) {
					document.getElementById('errorMsg').textContent =
						'–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è.'
					return
				}

				const category = zeroCategories[currentQuestionIndex]
				const responses = {}

				for (let i = 1; i <= 6; i++) {
					const el = document.getElementById(`q${i}`)
					if (el) responses[`q${i}`] = el.value
				}

				surveyResponses[category] = responses

				localStorage.setItem(
					'survey_' + currentData.name + '_' + Date.now(),
					JSON.stringify({
						kpi: currentData,
						responses: surveyResponses,
					})
				)

				currentQuestionIndex++
				showNextQuestion()
			})

			// === –ö–Ω–æ–ø–∫–∏ ===
			document.getElementById('backToInput').addEventListener('click', () => {
				document.getElementById('kpiForm').reset()
				showPage('inputPage')
			})

			document
				.getElementById('finishQuestions')
				.addEventListener('click', () => {
					showPage('inputPage')
					document.getElementById('kpiForm').reset()
				})
		</script>
	</body>
</html>
